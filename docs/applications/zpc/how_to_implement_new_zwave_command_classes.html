<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Guideline for implementing Command Classes &mdash; Unify Host SDK</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/custom_styles.css" type="text/css" />
    <link rel="canonical" href="https://siliconlabs.github.io/UnifySDK/applications/zpc/how_to_implement_new_zwave_command_classes.html" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../_static/doctools.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="ZPC Certification Information" href="readme_certification.html" />
    <link rel="prev" title="UAM maps for the ZPC" href="how_to_write_uam_files_for_the_zpc.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../doc/introduction.html" class="icon icon-home"> Unify
            <img src="../../_static/silicon-labs-logo.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                ver_1.2.0

              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../doc/introduction.html">Unify Host SDK</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../doc/UnifySDK.html">Unify Framework</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../doc/UnifySDK.html#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../doc/UnifySDK.html#systems-overview">Systems Overview</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../doc/UnifySDK.html#unify-applications-overview">Unify Applications Overview</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="../../doc/UnifySDK.html#unify-framework-protocol-controllers">Unify Framework Protocol Controllers</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="../aox/applications/aoxpc/readme_user.html">AoXPC User Guide</a></li>
<li class="toctree-l4"><a class="reference internal" href="../aox/applications/aoxpc/readme_developer.html">AoXPC Developer’s Guide</a></li>
<li class="toctree-l4"><a class="reference internal" href="../zigpc/readme_user.html">ZigPC User’s Guide</a></li>
<li class="toctree-l4"><a class="reference internal" href="../zigpc/readme_developer.html">ZigPC Developer Guide</a></li>
<li class="toctree-l4"><a class="reference internal" href="../zigpc/coding_standard.zigpc.html">ZigPC Coding Standard</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="readme_user.html">ZPC User’s Guide</a></li>
<li class="toctree-l4"><a class="reference internal" href="readme_certification.html">ZPC Certification Information</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../doc/UnifySDK.html#the-unify-framework-services">The Unify Framework Services</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../doc/UnifySDK.html#iot-services">IoT Services</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../doc/UnifySDK.html#overview-of-relations-among-unify-applications">Overview of relations among Unify Applications</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../doc/UnifySDK.html#overview-of-communication-among-unify-framework-applications">Overview of communication among Unify Framework Applications</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../doc/UnifySDK.html#unify-framework-release-notes">Unify Framework Release Notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../doc/UnifySDK.html#unify-framework-developer-guides">Unify Framework Developer Guides</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../doc/UnifySDK.html#resources">Resources</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../doc/multiprotocol.html">Multiprotocol Host Software</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../doc/getting_started.html">Getting Started with the Unify Host SDK</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../doc/readme_developer.html">Unify Developer Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../doc/system_requirements.html">System Requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../doc/license.html">License</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../doc/introduction.html">Unify</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <script>
    $(".wy-side-scroll").append("<div class='github-button'><iframe src='https://ghbtns.com/github-btn.html?user=SiliconLabs&repo=UnifySDK&type=watch&count=true&size=large&v=2' allowtransparency='true' frameborder='0' scrolling='0' width='170' height='30'></iframe></div>");
</script>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section class="tex2jax_ignore mathjax_ignore" id="guideline-for-implementing-command-classes">
<h1>Guideline for implementing Command Classes<a class="headerlink" href="#guideline-for-implementing-command-classes" title="Permalink to this heading"></a></h1>
<section id="defining-the-z-wave-command-class-attribute-state-data-model">
<h2>Defining the Z-Wave Command Class attribute state data model<a class="headerlink" href="#defining-the-z-wave-command-class-attribute-state-data-model" title="Permalink to this heading"></a></h2>
<p>The first step is to define the data model of the Z-Wave Command Class
attributes state, which will be presented under the endpoint attribute tree.
This could be achieved via reading the command class structure which is
described in the Z-Wave specification and define the type of the attributes.
The following example illustrates the Alarm Sensor command class attributes
that could hold all states related to alarm sensor command class.</p>
<p><img alt="Data Model" src="../../_images/alarm_sensor_data_model.png" /></p>
<p>After defining the data model, the next step is to define the type of each
node in the attribute store. Under the include package of the attribute store,
create the header of the command class types. In the header define the
types of the node with an additional type name that will be used in the
command class implementation.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="w">  </span><span class="k">typedef</span><span class="w"> </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">alarm_sensor_type_t</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="k">typedef</span><span class="w"> </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">alarm_sensor_state_t</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="k">typedef</span><span class="w"> </span><span class="n">zwave_node_id_t</span><span class="w"> </span><span class="n">alarm_sensor_id_t</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="k">typedef</span><span class="w"> </span><span class="kt">uint16_t</span><span class="w"> </span><span class="n">alarm_sensor_seconds_t</span><span class="p">;</span><span class="w"></span>

</pre></div>
</div>
<p>Define the attributes of command class, under the
attribute_store_defined_attribute_types.h. Define them by assigning
to the name of the attribute the value that it has. The types and definitions
of many attributes can be found under the ZW_classcmd.h. By defining the
attributes of the command class the attribute mapper can interpret
the data and make it easier to visualize the attribute store in the console.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="w">  </span><span class="c1">///////////////////////////////////</span>
<span class="w">  </span><span class="c1">// Alarm Sensor Command Class</span>
<span class="w">  </span><span class="n">DEFINE_ATTRIBUTE</span><span class="p">(</span><span class="n">ATTRIBUTE_COMMAND_CLASS_ALARM_SENSOR_VERSION</span><span class="p">,</span><span class="w"></span>
<span class="w">                  </span><span class="n">ZWAVE_CC_VERSION_ATTRIBUTE</span><span class="p">(</span><span class="n">COMMAND_CLASS_SENSOR_ALARM</span><span class="p">))</span><span class="w"></span>

<span class="w">  </span><span class="c1">// Bitmask Attribute contains the bytes that describe the alarm</span>
<span class="w">  </span><span class="c1">// types that the device support. uint8_t</span>
<span class="w">  </span><span class="n">DEFINE_ATTRIBUTE</span><span class="p">(</span><span class="n">ATTRIBUTE_COMMAND_CLASS_ALARM_SENSOR_BITMASK</span><span class="p">,</span><span class="w"></span>
<span class="w">                  </span><span class="p">((</span><span class="n">COMMAND_CLASS_SENSOR_ALARM</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="mi">8</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mh">0x02</span><span class="p">))</span><span class="w"></span>

<span class="w">  </span><span class="c1">// Alarm type contains the type of the alarm. alarm_sensor_type_t type</span>
<span class="w">  </span><span class="n">DEFINE_ATTRIBUTE</span><span class="p">(</span><span class="n">ATTRIBUTE_COMMAND_CLASS_ALARM_SENSOR_TYPE</span><span class="p">,</span><span class="w"></span>
<span class="w">                  </span><span class="p">((</span><span class="n">COMMAND_CLASS_SENSOR_ALARM</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="mi">8</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mh">0x03</span><span class="p">))</span><span class="w"></span>

<span class="w">  </span><span class="c1">// Sensor state contains the state of the alarm if alarm is active or not</span>
<span class="w">  </span><span class="c1">// alarm_sensor_state_t type</span>
<span class="w">  </span><span class="n">DEFINE_ATTRIBUTE</span><span class="p">(</span><span class="n">ATTRIBUTE_COMMAND_CLASS_ALARM_SENSOR_STATE</span><span class="p">,</span><span class="w"></span>
<span class="w">                  </span><span class="p">((</span><span class="n">COMMAND_CLASS_SENSOR_ALARM</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="mi">8</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mh">0x04</span><span class="p">))</span><span class="w"></span>

<span class="w">  </span><span class="c1">// Node ID, which detected the alarm condition. alarm_sensor_id_t type</span>
<span class="w">  </span><span class="n">DEFINE_ATTRIBUTE</span><span class="p">(</span><span class="n">ATTRIBUTE_COMMAND_CLASS_ALARM_SENSOR_NODE_ID</span><span class="p">,</span><span class="w"></span>
<span class="w">                  </span><span class="p">((</span><span class="n">COMMAND_CLASS_SENSOR_ALARM</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="mi">8</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mh">0x05</span><span class="p">))</span><span class="w"></span>

<span class="w">  </span><span class="c1">//Seconds indicates time the remote alarm must be active since last received report.</span>
<span class="w">  </span><span class="c1">// alarm_sensor_seconds_t type</span>
<span class="w">  </span><span class="n">DEFINE_ATTRIBUTE</span><span class="p">(</span><span class="n">ATTRIBUTE_COMMAND_CLASS_ALARM_SENSOR_SECONDS</span><span class="p">,</span><span class="w"></span>
<span class="w">                  </span><span class="p">((</span><span class="n">COMMAND_CLASS_SENSOR_ALARM</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="mi">8</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mh">0x06</span><span class="p">))</span><span class="w"></span>
</pre></div>
</div>
<p>Under the attribute store package and under the src in
zpc_attribute_store_registration.c. In this file, define
the attribute types for the attribute store API for the new command class.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="w">  </span><span class="c1">/////////////////////////////////////////////////////////////////////</span>
<span class="w">  </span><span class="c1">//        Alarm Sensor Command Class attributes</span>
<span class="w">  </span><span class="c1">/////////////////////////////////////////////////////////////////////</span>
<span class="w">  </span><span class="n">status</span><span class="w"> </span><span class="o">|=</span><span class="w"> </span><span class="n">attribute_store_register_type</span><span class="p">(</span><span class="w"></span>
<span class="w">    </span><span class="n">ATTRIBUTE_COMMAND_CLASS_ALARM_SENSOR_VERSION</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="s">&quot;Alarm Sensor Command Class version&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">ATTRIBUTE_ENDPOINT_ID</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">U8_STORAGE_TYPE</span><span class="p">);</span><span class="w"></span>

<span class="w">  </span><span class="n">status</span><span class="w"> </span><span class="o">|=</span><span class="w"> </span><span class="n">attribute_store_register_type</span><span class="p">(</span><span class="w"></span>
<span class="w">    </span><span class="n">ATTRIBUTE_COMMAND_CLASS_ALARM_SENSOR_BITMASK</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="s">&quot;Alarm Sensor Bitmask&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">ATTRIBUTE_ENDPOINT_ID</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">BYTE_ARRAY_STORAGE_TYPE</span><span class="p">);</span><span class="w"></span>

<span class="w">   </span><span class="n">status</span><span class="w"> </span><span class="o">|=</span><span class="w"> </span><span class="n">attribute_store_register_type</span><span class="p">(</span><span class="w"></span>
<span class="w">    </span><span class="n">ATTRIBUTE_COMMAND_CLASS_ALARM_SENSOR_TYPE</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="s">&quot;Alarm Sensor Type&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">ATTRIBUTE_ENDPOINT_ID</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">U8_STORAGE_TYPE</span><span class="p">);</span><span class="w"></span>

<span class="w">    </span><span class="n">status</span><span class="w"> </span><span class="o">|=</span><span class="w"> </span><span class="n">attribute_store_register_type</span><span class="p">(</span><span class="w"></span>
<span class="w">    </span><span class="n">ATTRIBUTE_COMMAND_CLASS_ALARM_SENSOR_STATE</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="s">&quot;State&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">ATTRIBUTE_COMMAND_CLASS_ALARM_SENSOR_TYPE</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">U8_STORAGE_TYPE</span><span class="p">);</span><span class="w"></span>

<span class="w">    </span><span class="n">status</span><span class="w"> </span><span class="o">|=</span><span class="w"> </span><span class="n">attribute_store_register_type</span><span class="p">(</span><span class="w"></span>
<span class="w">    </span><span class="n">ATTRIBUTE_COMMAND_CLASS_ALARM_SENSOR_NODE_ID</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="s">&quot;NodeID&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">ATTRIBUTE_COMMAND_CLASS_ALARM_SENSOR_TYPE</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">U16_STORAGE_TYPE</span><span class="p">);</span><span class="w"></span>

<span class="w">    </span><span class="n">status</span><span class="w"> </span><span class="o">|=</span><span class="w"> </span><span class="n">attribute_store_register_type</span><span class="p">(</span><span class="w"></span>
<span class="w">    </span><span class="n">ATTRIBUTE_COMMAND_CLASS_ALARM_SENSOR_SECONDS</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="s">&quot;Seconds&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">ATTRIBUTE_COMMAND_CLASS_ALARM_SENSOR_TYPE</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">U16_STORAGE_TYPE</span><span class="p">);</span><span class="w"></span>

</pre></div>
</div>
<p>Under the package zwave_command_class/src, create the header of the command
class implementation, it’s easy to use a copy of another command class header
that is up to date and made the appropriate modifications to suit the new
implementation, doxygen documentation is based on the structure of this header
to create the section about the new command class, based on that the comments
of the header must be well defined. Moreover, in the zwave_command_class_fixt.c
should include the header and call the initialization function that is in the
implementation file (e.g. zwave_command_class_&lt; name &gt;.c). Before the
implementation, in CMakeLists.txt in the zwave_command_classes package add the
path for the command class file that includes the implementation code
(e.g. src/zwave_command_class_&lt; name &gt;.c).</p>
</section>
<section id="implementation">
<h2>Implementation<a class="headerlink" href="#implementation" title="Permalink to this heading"></a></h2>
<p>The easiest way to start our implementation is to copy and use as a template an
up-to-date implementation e.g. zwave_command_class_alarm_sensor.c,
zwave_command_class_binary_switch.c. In the implementation code of the command
class, can be found the following structure.</p>
<section id="command-class-functions">
<h3>Command Class Functions<a class="headerlink" href="#command-class-functions" title="Permalink to this heading"></a></h3>
<section id="public-interface-functions">
<h4>Public interface functions<a class="headerlink" href="#public-interface-functions" title="Permalink to this heading"></a></h4>
<p><strong>The initialisation function</strong>: The function starts the procedure by
registering the rules for the attributes. Each attribute can have only one
rule, but it is not necessary to register a rule for all the attributes.
A rule is necessary only for attributes that will be used from a set or/and get
function. Register the rule through the zwave_command_class_register_rule
(Attribute type, set_function, get function) if the attribute will be used only
for a set or get command, provide only this function and NULL for the other one.</p>
<p><strong>Attribute store callbacks registration</strong>: Attribute store callbacks functions
are responsible for do the appropriate changes to the attribute store when a
change is taking place to an attribute (e.g. delete, update). Through the
functions that register the callbacks, we can register the function that will
make the appropriate changes to the attribute store when any change happens to
a specific attribute. The function that we will register will be implemented in
the same file.</p>
<p>Register Z-wave Command Class handler: This piece of code is responsible to
register the handler of the command class. In the command_handler assign the
function that will handle the commands that are addressed to our command class.</p>
</section>
<section id="implementation-of-the-assigned-functions">
<h4>Implementation of the assigned functions<a class="headerlink" href="#implementation-of-the-assigned-functions" title="Permalink to this heading"></a></h4>
<p><strong>Resolution Functions</strong>: Resolutions functions are the get/set functions that
we assigned the rules. In each of these get/set functions fill the frame with
the appropriate information that it needs to be based on the command class
specification to return the response that needs. If no existing command class
structure serves the scope, create a new command structure in the header file.
Before the synthesis of the frame it could be necessary to do some things to
find the information that should be included in the frame.</p>
<p><strong>Attribute Store Callback Functions</strong>: These functions are the functions that
handle the changes of an attribute. When an attribute is updated or deleted etc.
some actions should take place in the attribute store. An example can be when
the version of an endpoint is updating, it could need to create some of the
nodes that at a later point will be used to handle other commands.</p>
<p><strong>Incoming commands handler</strong>: This function is the one that will handle the
report commands. In this function, we check the size of command frame, the
header which is the Command Class identifier, if the size of the frame and the
Command Class identifier are as expected we proceed and based on the Command
identifier call the frame parsing function that is responsible to handle the
command.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="w">  </span><span class="n">zwave_command_handler_t</span><span class="w"> </span><span class="n">handler</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{};</span><span class="w"></span>
<span class="w">  </span><span class="n">handler</span><span class="p">.</span><span class="n">support_handler</span><span class="w">         </span><span class="o">=</span><span class="w"> </span><span class="nb">NULL</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="n">handler</span><span class="p">.</span><span class="n">control_handler</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">zwave_command_class_example_control_handler</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="n">handler</span><span class="p">.</span><span class="n">minimal_scheme</span><span class="w">             </span><span class="o">=</span><span class="w"> </span><span class="n">ZWAVE_CONTROLLER_ENCAPSULATION_NONE</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="n">handler</span><span class="p">.</span><span class="n">manual_security_validation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="n">handler</span><span class="p">.</span><span class="n">command_class</span><span class="w">              </span><span class="o">=</span><span class="w"> </span><span class="n">COMMAND_CLASS_EXAMPLE</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="n">handler</span><span class="p">.</span><span class="n">version</span><span class="w">                    </span><span class="o">=</span><span class="w"> </span><span class="n">EXAMPLE_VERSION</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="n">handler</span><span class="p">.</span><span class="n">command_class_name</span><span class="w">         </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Example&quot;</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="n">handler</span><span class="p">.</span><span class="n">comments</span><span class="w">                   </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p><strong>Frame-parsing Functions</strong>: These are the functions that handle the incoming
frames by using the structure of the frame and extracting information from the
bytes to serve the scope of the specified commands that are documented in the
Z-Wave Application Command Class Specification.</p>
</section>
</section>
<section id="post-processing">
<h3>Post-processing<a class="headerlink" href="#post-processing" title="Permalink to this heading"></a></h3>
<p>After the implementation of the command class, you could be able to verify the
correct operation by including a device that supports the new command class and
verfiy the new command class attributes are created and updated via checking
the attribute store (i.e., using ‘attribute_store_log &lt;node_id&gt;’ CLI commands).</p>
<p>To ensure the implemented functionalities are mapped to the doddot ZCl data
model, one should create the UAM file under dotodot_mappers/rules for Dotdot
Cluster to Z-Wave Command Class Mapping. More information regarding mapping
can be found above in Dotdot Cluster Mapping section.</p>
<p>If the command class attributes state required to be updated via issue ‘get’
type of commands, one could add the attribute and the polling  interval in the
zwave_poll_config.yaml which can be found under the zpc_rust package. More
information regarding polling can be found in the
Network Polling section in <a class="reference internal" href="readme_user.html"><span class="doc std std-doc">ZPC User’s Guide</span></a>.</p>
<p><strong>Test class</strong>: Under the zwave_command_class/test we need to have a test class
to test the functionality of the command class. An approach that can be used
to implement the test class is to try and think based on the command class
specification and the code of the command class the good and bad scenarios
that could happen. A suggestion is to try and create a method for each bad
scenario, based on the implementation of the command class could be necessary
in some occasions to create some nodes to test if any change happens to
others. After the implementation of the test class should add the unit test
to the CMakeLists.txt.</p>
<blockquote>
<div><p>NOTE: An implementation of the command class can be more complicated and
can consist of more than that mentioned above. This is only a guide that
helps to start with.</p>
</div></blockquote>
</section>
</section>
</section>


           </div>
          </div>
          <footer>
    <hr/>
    <p>Copyright © 2022 Silicon Laboratories. All rights reserved.</p>
</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>