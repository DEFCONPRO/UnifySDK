<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Unify SDK User Guide: Unify Library Overview</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Unify SDK User Guide
   &#160;<span id="projectnumber">1.1.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('md_doc_overview.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Unify Library Overview </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This page describes the Unify SDK library. The purpose of the Unify SDK library is to share code among the Unify components developed by Silicon Labs and to provide a platform on which Slabs customers can build their own components. Besides the obvious advantage of sharing code in terms of maintainability and rapid development, the library will also ensure a common look and feel of the various Unify components in terms of operation and system integration.</p>
<p>The Unify SDK Library provides the following overall features</p>
<ul>
<li>Base platform which provides event loop, config system and logging system.</li>
<li>Unit test framework</li>
<li>Build system with docker containers</li>
<li>Documentation framework</li>
<li>Packaging system for distributing components and basic scripts for system integration with debian buster. <em>not quite done</em></li>
<li>Coding standard</li>
</ul>
<p>The figure below show the meta functionality that the Unify Frameworks provides.</p>
<div class="plantumlgraph">
<object type="image/svg+xml" data="unify_framework.svg"></object>
</div>
<h1><a class="anchor" id="autotoc_md88"></a>
Base Platform</h1>
<p>The Base Platform provides a number of components which can be shared among Unify applications. Applications are totally free to use a subset of these components. but Unify application should avoid duplicating the functionality of these Unify components.</p>
<p>The figure below illustrates the inter dependencies between various components in the the Unify SDK Library. Each component (blue block in the figure) has a public interface which is exported by the library.</p>
<div class="plantumlgraph">
<object type="image/svg+xml" data="platform_components.svg"></object>
</div>
<h2><a class="anchor" id="autotoc_md89"></a>
Main loop</h2>
<p>The main loop component implements as the name hints a main loop which can be used as the event system of a Unify application. The main loop components does not implement the C main function itself, but has a uic_main(...) function which has the main loop. The main loop uses the event system from the Contiki operating system and implements a select loop that reacts on events on a set of file descriptors. The main loop also implements a framework to initialize and shutdown other components as well as a posix signal handler to shut down the application in a controlled manner.</p>
<p>The main loop is hardcoded to use the config system component to parse config options and command line arguments and the logging system printing log messages.</p>
<p>Details on how to build a new application using the main loop component can be found <a class="el" href="md_doc_readme_developer.html">here</a>.</p>
<p>Main loop API documentation</p>
<h2><a class="anchor" id="autotoc_md90"></a>
Config System</h2>
<p>The config system implements parsing of config files and command line arguments. All Unify applications should use the config system to present a uniform look and feel across all applications.</p>
<p>Config system API documentation</p>
<h2><a class="anchor" id="autotoc_md91"></a>
Logging System</h2>
<p>The logging system features logging with severity level tagging and log filtering. All Unify applications should use the logging system to present a uniform look and feel across all applications.</p>
<p>Logging System API documentation</p>
<h2><a class="anchor" id="autotoc_md92"></a>
MQTT Client</h2>
<p>The MQTT client is build on top a Eclipse Mosquitto MQTT and handles MQTT connection, subscribing and publishing. It implements re-connections and caching of publish messages which has been published which the client has been disconnected from the broker.</p>
<p>MQTT Client API documentation</p>
<h2><a class="anchor" id="autotoc_md93"></a>
DotDot Serializer</h2>
<p>The role of the DotDot Serializer is to compose and parse Unify json documents which are sent and received over the MQTT interface.</p>
<p>DotDot Serializer API documentation</p>
<h2><a class="anchor" id="autotoc_md94"></a>
DotDot Attributes</h2>
<p>This components will automatically publish MQTT messages based on changes in the Attribute Store and handles write MQTT messages and update the Attribute Store accordingly.</p>
<p>[DotDot Attributes API]( ) </p>
<h2><a class="anchor" id="autotoc_md95"></a>
Datastore</h2>
<p>The Datastore is a generic data store that stores key-value pairs in an SQLite database. The Datastore is also use by the Attribute System to store data in a tree structure.</p>
<p>Datastore API documentation</p>
<h2><a class="anchor" id="autotoc_md96"></a>
Attribute Store</h2>
<p>The Attribute Store provides an interface for reading and writing key value pairs in a tree structure.</p>
<p>Attribute Store API documentation</p>
<h2><a class="anchor" id="autotoc_md97"></a>
Attribute Mapper</h2>
<p>The attribute mapper is able to map attributes in the Attribute System to each other. The mapper is using a scripting langrage to perform the mapping. Complex mappings are supported, where one attribute might depend on multiple other attributes.</p>
<h2><a class="anchor" id="autotoc_md98"></a>
Console Interface</h2>
<p>The Console Interface serves as an optional debugging interface to the Unify components. It features help menus and auto completion.</p>
<p>Console Interface API documentation </p>
<h2><a class="anchor" id="autotoc_md99"></a>
SmartStart</h2>
<p>The SmartStart component is a common component that subscribes to the SmartStart UCL topic and can be used by a Protocol Controller to check if a given node is in the SmartStart list. The SmartStart component is also responsible for publishing changes to the SmartStart list on node add and remove events.</p>
<h2><a class="anchor" id="autotoc_md100"></a>
Node State Topic</h2>
<p><em>We need to investigate how much of this code can be shared.</em></p>
<p>The role of the Network Monitor is to keep track of the network state and in particular the node states.</p>
<p>The Network Monitor react to node add / remove events from the a Protocol Controller component and insert nodes in the attributes system. Periodically the network monitor will check if nodes are responsive and update their states accordingly. At boot the Network Monitor will check if the node list reported by the controller matches the data in the Attribute System. If a mismatch is found the the Attribute Store is updated by deleting or inserting nodes. The attribute resolver will make sure to resolve newly added nodes.</p>
<h2><a class="anchor" id="autotoc_md101"></a>
Protocol Controller MQTT</h2>
<p>The Protocol Controller MQTT component manages the following MQTT topics:</p>
<ul>
<li>ucl/by-unid/+/ProtocolController/NetworkManagement/#</li>
</ul>
<p>It provides an interface for protocol controllers to publish their state and for registering callbacks when state changes are requested from the MQTT side.</p>
<h2><a class="anchor" id="autotoc_md102"></a>
OTA MQTT Client</h2>
<p>This component handles OTA related MQTT topics that are used to announces OTA images availability and OTA status.</p>
<h1><a class="anchor" id="autotoc_md103"></a>
Test Framework</h1>
<p>The Test Framework consists of the the <em>Throw the Switch Unity</em> and <em>Throw the Switch CMOCK</em> frameworks for making unit tests and mocks. The two libraries has been integrated into the cmake build system and provides automatic mock generation for C header files.</p>
<p>See <a class="el" href="md_doc_readme_developer.html">Developer documentation.</a></p>
<h1><a class="anchor" id="autotoc_md104"></a>
Build System</h1>
<p>The Unify SDK Library provides a Build System based on the CMAKE build system. Various cmake macros has been defined for making mocks, unit tests and packages.</p>
<p>See <a class="el" href="md_doc_readme_developer.html">Developer documentation.</a></p>
<h1><a class="anchor" id="autotoc_md105"></a>
Packaging Framework</h1>
<p>The Packaging Framework supports debian and cmake scripts which facilitates packaging of Unify components.</p>
<h1><a class="anchor" id="autotoc_md106"></a>
Coding Standard</h1>
<p>All Unify component should adhere to a common coding standard.</p>
<p>See the <a class="el" href="md_doc_standards_coding-standard.html">Unify Coding Standard</a> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Wed Mar 23 2022 08:49:23 for Unify SDK User Guide by <a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20 </li>
  </ul>
</div>
</body>
</html>
