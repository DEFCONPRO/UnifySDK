<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Unify SDK User Guide: Unify Debugging Guide</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Unify SDK User Guide
   &#160;<span id="projectnumber">1.1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('md_doc_readme_debug.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Unify Debugging Guide </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="autotoc_md122"></a>
ZPC Debugging Guide</h1>
<h2><a class="anchor" id="autotoc_md123"></a>
Interpreting ZPC Console Logs for Various Operations</h2>
<h3><a class="anchor" id="autotoc_md124"></a>
Using the ZPC Command Line Interface</h3>
<p>Pressing return in ZPC console logs will open Unify Command Line Interface. "help" command will display the available commands in Command Line Interface as shown below.</p>
<div class="fragment"><div class="line">ZPC&gt;help</div>
<div class="line">==================================================</div>
<div class="line">Unify Command line interface Help:</div>
<div class="line">==================================================</div>
<div class="line">[...]</div>
<div class="line">ZPC&gt;</div>
</div><!-- fragment --><p>Several types of commands will be available. They use similar prefixes and suffixes. For example,</p><ul>
<li><b>attribute_store___ provides access to Attribute Store functionalities</b></li>
<li><b>__zwave___ provides access to Z-Wave functionalities</b></li>
<li><b>___log</b> prints out information about the state of a component</li>
</ul>
<p>Note that the Command Line commands should only be used to log information and are not recommended to trigger changes, such as network management operations or modifying data in the Attribute Store.</p>
<p>When an unexpected outcome occurs, log the state of the components that are expected to perform an action.</p>
<h3><a class="anchor" id="autotoc_md125"></a>
Incoming Z-Wave Frame to ZPC from Z-Wave Module</h3>
<p>Incoming Z-Wave API frames are printed directly to the console, which allows detecting incoming Z-Wave frames or other messages from the Z-Wave API module.</p>
<p>For example, </p><div class="fragment"><div class="line">[zwapi_protocol_rx_dispatch] Incoming Z-Wave API frame (hex): Length=12 Type=00</div>
<div class="line">Cmd=A8 00 00 01 00 02 04 86 14 5E 02 00 C0 00 7F 7F</div>
</div><!-- fragment --><p>If the ZPC is communicating to the nodes with S2/S0, the log message will show encrypted frames. The exact frame payload is typically not printed out.</p>
<p>Shortly after receiving the frame, the Command Class handler will print out the outcome of processing the Z-Wave frame:</p>
<div class="fragment"><div class="line">[zwave_command_handler_callbacks] Command Class=0x25 - Command=0x03 from</div>
<div class="line">NodeID 004:1 handled successfully.</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md126"></a>
Outgoing Z-Wave Frame from ZPC to Z-Wave Module</h3>
<p>Outgoing Z-Wave frames can be identified in console log. For example,</p>
<div class="fragment"><div class="line">[zwave_tx_queue] Enqueuing new frame (id=0x24) - 001:0 -&gt;  002:0 -</div>
<div class="line">Encapsulation 1 - Payload [6C 01 A4 04 8E 01 01 01 ]</div>
</div><!-- fragment --><p>A single frame can results in several TX Queue elements, so multiple TX Queue messages may appear.</p>
<h3><a class="anchor" id="autotoc_md127"></a>
Z-Wave Module Information</h3>
<p>The following console log describes various things about Z-Wave module.</p>
<div class="fragment"><div class="line">[zwave_rx] Z-Wave API module type: 7</div>
<div class="line">[zwave_rx] Z-Wave API module revision: 0</div>
<div class="line">[zwave_rx] Z-Wave API module software version: 7.15</div>
<div class="line">[zwave_rx] Z-Wave API module Manufacturer ID 0x0000</div>
<div class="line">[zwave_rx] Z-Wave API module Product type 0x0004</div>
<div class="line">[zwave_rx] Z-Wave API module Product ID 0x0004</div>
<div class="line">[zwave_rx] Z-Wave API module supported setup mask 0xFE</div>
<div class="line">[zwave_rx] Z-Wave API module provides a Controller API</div>
<div class="line">[zwave_rx] Z-Wave API module is primary or inclusion controller</div>
<div class="line">[zwave_rx] Z-Wave API module is SIS in the network</div>
<div class="line">[zwave_rx] Z-Wave API module library type: 7</div>
<div class="line">[zwave_rx] Z-Wave API module RF region 1</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md128"></a>
Z-Wave Protocol Version</h3>
<p>The following console log describes version information about Z-Wave Protocol. </p><div class="fragment"><div class="line">[zwave_rx] Z-Wave API protocol type: 0</div>
<div class="line">[zwave_rx] Z-Wave API protocol version: 7.15.03</div>
<div class="line">[zwave_rx] Z-Wave API protocol build number: 211</div>
<div class="line">[zwave_rx] Z-Wave API protocol git commit: 30313233343536373839414243444546</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md129"></a>
S2 Keys</h3>
<p>S2 keys are printed in console logs under each key level header.</p>
<p>S2 Unauthenticated: Key class 1 <br  />
 S2 Authenticated: Key class 2 <br  />
 S2 Access: Key class 4 <br  />
 S2 Authenticated LR: Key class 8 <br  />
 S2 Access LR: Key class 10 <br  />
</p>
<p>For example,</p>
<div class="fragment"><div class="line">[zwave_s2_keystore] Key class 1</div>
<div class="line">[zwave_s2_keystore] FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF</div>
<div class="line">[zwave_s2_keystore] Key class 2</div>
<div class="line">[zwave_s2_keystore] CFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md130"></a>
Unify Build Version</h3>
<p>Unify Build version is printed on the first line after the ZPC starts. It looks like the following:</p>
<div class="fragment"><div class="line"># uic build: ver_0.0.6_RC1-339-g3af36c4c</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md131"></a>
MQTT Subscriptions Done by ZPC</h3>
<div class="fragment"><div class="line">[mqtt_client] Subscribing to: ucl/by-group/+/Basic/Commands/WriteAttributes</div>
<div class="line">[mqtt_client] Subscribing to: ucl/by-group/+/Basic/Commands/ResetToFactoryDefaults</div>
<div class="line">[mqtt_client] Subscribing to: ucl/by-group/+/PowerConfiguration/Commands/WriteAttributes</div>
<div class="line">[mqtt_client] Subscribing to: ucl/by-group/+/DeviceTemperatureConfiguration/Commands/WriteAttributes</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md132"></a>
Changing Log Debug Level in ZPC</h2>
<h3><a class="anchor" id="autotoc_md133"></a>
Log Severity</h3>
<p>Log level of ZPC can be changed by using the following command line argument or config file option.</p>
<div class="fragment"><div class="line">zpc  --log.level arg (=d)</div>
</div><!-- fragment --><p>d: Debug <br  />
 i: Info <br  />
 w: Warning <br  />
 e: Error <br  />
 c: Critical <br  />
</p>
<h3><a class="anchor" id="autotoc_md134"></a>
Component-Based Log Severity</h3>
<p>Log levels of ZPC can also be changed on component granularity by using the following command line argument or config file option for each component.</p>
<p>Tag based log level </p><div class="fragment"><div class="line"># Format: &lt;component&gt;:&lt;severity&gt;,&lt;component&gt;:&lt;severity&gt;</div>
<div class="line">zpc   --log.tag_level component1:level,component2:level</div>
</div><!-- fragment --><p>For example, to set ZPC MQTT log level to Info(i) and UIC Main log level to Error(e), use the following command line. </p><div class="fragment"><div class="line">zpc --log.tag_level uic_mqtt:i,uic_main:e</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md135"></a>
Collecting Z-Wave Serial Logs in ZPC</h2>
<p>Serial Log collection in ZPC can be enabled by using the following command line argument or config file option.</p>
<div class="fragment"><div class="line">zpc --zpc.serial_log_file &lt;filename&gt;</div>
</div><!-- fragment --><p>If this is set, the ZPC will write a log of the communication over the serial interface with the Z-Wave module to the path provided. If the file exists, the log will be appended to this file, otherwise the file will be created. The ZPC will not handle log rotation.</p>
<h2><a class="anchor" id="autotoc_md136"></a>
Using MQTT Explorer to Monitor Messages</h2>
<p>You can publish MQTT message and observe the MQTT messages stored in the broker with a MQTT Explorer. MQTT explorer is a MQTT client that provides a structured overview of your MQTT topics.</p>
<p>First, while ZPC is running, connect the MQTT Explorer to the host where your MQTT broker is located and the topics should be observed and structured based on Unify spec. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Wed Feb 9 2022 14:33:59 for Unify SDK User Guide by <a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20 </li>
  </ul>
</div>
</body>
</html>
