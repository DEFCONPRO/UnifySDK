<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Unify SDK User Guide: ANGEL User&#39;s Guide</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Unify SDK User Guide
   &#160;<span id="projectnumber">1.0.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('md_applications_angel_readme_user.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">ANGEL User's Guide </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The group manager MQTT Client, ANGEL, is an application that manages the by-group topic <code>ucl/by-group/</code>. It acts as a lookup entity that provides protocol controllers or other MQTT clients information about the interactions between groups, endpoints, and supported commands. It does not handle the topics that are used to execute group commands, for example <code>ucl/by-group/&lt;group-id&gt;/&lt;Command&gt;</code>, which is done by protocol controllers.</p>
<p>The ANGEL application does not persist any collected information. Instead, it collects and publishes its data over the MQTT Framework.</p>
<p>Protocol controllers can run without the ANGEL application, which results in limited functionality.</p>
<h1><a class="anchor" id="autotoc_md106"></a>
Running the ANGEL</h1>
<h2><a class="anchor" id="autotoc_md107"></a>
Using Systemd Service</h2>
<p>The best way to run the ANGEL is using the Systemd service that is installed with the Debian installer. For more information, see <a class="el" href="index.html#md_README">README.md</a>.</p>
<h2><a class="anchor" id="autotoc_md108"></a>
Using Command Line</h2>
<p>Alternatively, the ANGEL may be run by executing <code>uic-angel</code>. It is possible to configure the MQTT server, database path, through command line options. For more details, run <code>uic-angel --help</code>.</p>
<h2><a class="anchor" id="autotoc_md109"></a>
Output Examples</h2>
<div class="fragment"><div class="line">pi@rpi4ovdo1:~/demo $ ./uic-angel --help</div>
<div class="line"> </div>
<div class="line">Usage: /usr/bin/uic-angel [Options]</div>
<div class="line"> </div>
<div class="line">Options:</div>
<div class="line">  --conf arg (=/etc/uic/uic.cfg)        Config file in YAML format</div>
<div class="line">  --help                                Print this help message and quit</div>
<div class="line">  --dump-config                         Dumps the current configuration on a</div>
<div class="line">                                        YAML config file format that can be</div>
<div class="line">                                        passed to --conf option</div>
<div class="line">  --version                             Print version information and quit</div>
<div class="line"> </div>
<div class="line">Following options can also be in a Config file.</div>
<div class="line"> Options and values passed on command line here take precedence over the options and values in config file:</div>
<div class="line">  --mqtt.host arg (=localhost)          MQTT broker hostname or IP</div>
<div class="line">  --mqtt.port arg (=1883)               MQTT broker port</div>
<div class="line">  --log.level arg (=d)                  Log Level (d,i,w,e,c)</div>
<div class="line">  --log.tag_level arg                   Tag based log level</div>
<div class="line">                                        Format: &lt;tag&gt;:&lt;severity&gt;,</div>
<div class="line">                                        &lt;tag&gt;:&lt;severity&gt;, ...</div>
<div class="line">  --mqtt.client_id arg (=uic-angel)     override mqtt client name</div>
</div><!-- fragment --><div class="fragment"><div class="line">pi@raspberrypi:~ $ /usr/bin/uic-angel</div>
<div class="line">2021-06-04 13:53:21:059070 &lt;d&gt; [sl_log] Setting log level to debug</div>
<div class="line">2021-06-04 13:53:21:069203 &lt;i&gt; [mqtt_client] connecting to &quot;localhost&quot; port:1883</div>
<div class="line">2021-06-04 13:53:21:073466 &lt;i&gt; [mqtt_client] subscribing to &quot;ucl/by-unid/+/+/Groups/Attributes/GroupList/Reported&quot; qos:0</div>
<div class="line">2021-06-04 13:53:21:074232 &lt;i&gt; [mqtt_client] subscribing to &quot;ucl/by-unid/+/+/Groups/Attributes/+/Name/Reported&quot; qos:0</div>
<div class="line">2021-06-04 13:53:21:074661 &lt;i&gt; [mqtt_client] subscribing to &quot;ucl/by-unid/+/+/+/SupportedCommands&quot; qos:0</div>
<div class="line">2021-06-04 13:53:21:075888 &lt;i&gt; [mqtt_client] publishing &quot;ucl/by-group/1/GroupName&quot; payload:{&quot;value&quot;:&quot;Lights&quot;} ret:true</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Mon Aug 30 2021 13:07:52 for Unify SDK User Guide by <a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20 </li>
  </ul>
</div>
</body>
</html>
