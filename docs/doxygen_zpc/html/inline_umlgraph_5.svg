<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="514px" preserveAspectRatio="none" style="width:1493px;height:514px;" version="1.1" viewBox="0 0 1493 514" width="1493px" zoomAndPan="magnify"><defs><filter height="300%" id="fs50hrijuet9e" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFE0" height="502.5234" style="stroke:#A80036;stroke-width:1.0;" width="100" x="74" y="6"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="94" x="77" y="18.0669">MQTT Broker</text><rect fill="#ADD8E6" height="502.5234" style="stroke:#A80036;stroke-width:1.0;" width="968" x="519.5" y="6"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="30" x="988.5" y="18.0669">ZPC</text><line style="stroke:#A80036;stroke-width:1.0;" x1="123.5" x2="123.5" y1="60.4297" y2="315.7578"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="123.5" x2="123.5" y1="315.7578" y2="356.5625"/><line style="stroke:#A80036;stroke-width:1.0;" x1="123.5" x2="123.5" y1="356.5625" y2="470.2266"/><line style="stroke:#A80036;stroke-width:1.0;" x1="579.5" x2="579.5" y1="60.4297" y2="315.7578"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="579.5" x2="579.5" y1="315.7578" y2="356.5625"/><line style="stroke:#A80036;stroke-width:1.0;" x1="579.5" x2="579.5" y1="356.5625" y2="470.2266"/><line style="stroke:#A80036;stroke-width:1.0;" x1="972" x2="972" y1="60.4297" y2="315.7578"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="972" x2="972" y1="315.7578" y2="356.5625"/><line style="stroke:#A80036;stroke-width:1.0;" x1="972" x2="972" y1="356.5625" y2="470.2266"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1400.5" x2="1400.5" y1="60.4297" y2="315.7578"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="1400.5" x2="1400.5" y1="315.7578" y2="356.5625"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1400.5" x2="1400.5" y1="356.5625" y2="470.2266"/><rect fill="#FEFECE" filter="url(#fs50hrijuet9e)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="55" x="94.5" y="25.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="41" x="101.5" y="45.1279">MQTT</text><rect fill="#FEFECE" filter="url(#fs50hrijuet9e)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="55" x="94.5" y="469.2266"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="41" x="101.5" y="489.2217">MQTT</text><rect fill="#FEFECE" filter="url(#fs50hrijuet9e)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="108" x="523.5" y="25.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="94" x="530.5" y="45.1279">UclNodeState</text><rect fill="#FEFECE" filter="url(#fs50hrijuet9e)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="108" x="523.5" y="469.2266"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="94" x="530.5" y="489.2217">UclNodeState</text><rect fill="#FEFECE" filter="url(#fs50hrijuet9e)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="183" x="879" y="25.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="169" x="886" y="45.1279">UclNetworkManagement</text><rect fill="#FEFECE" filter="url(#fs50hrijuet9e)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="183" x="879" y="469.2266"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="169" x="886" y="489.2217">UclNetworkManagement</text><rect fill="#FEFECE" filter="url(#fs50hrijuet9e)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="162" x="1317.5" y="25.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="148" x="1324.5" y="45.1279">NetworkManagement</text><rect fill="#FEFECE" filter="url(#fs50hrijuet9e)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="162" x="1317.5" y="469.2266"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="148" x="1324.5" y="489.2217">NetworkManagement</text><path d="M5,75.4297 L5,100.4297 L240,100.4297 L240,85.4297 L230,75.4297 L5,75.4297 " fill="#FBFB77" filter="url(#fs50hrijuet9e)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M230,75.4297 L230,85.4297 L240,85.4297 L230,75.4297 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="214" x="11" y="92.4966">User trigger Remove Offline Node</text><polygon fill="#A80036" points="567.5,141.8281,577.5,145.8281,567.5,149.8281,571.5,145.8281" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="124" x2="573.5" y1="145.8281" y2="145.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="415" x="131" y="125.6294">ucl/by-unid/&lt;offline-node-unid&gt;/State/Commands/OfflineRemove</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="5" x="131" y="140.7622">"</text><polygon fill="#A80036" points="960.5,170.9609,970.5,174.9609,960.5,178.9609,964.5,174.9609" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="579.5" x2="966.5" y1="174.9609" y2="174.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="369" x="586.5" y="169.895">ucl_network_management_remove_offline_node(node_id)</text><polygon fill="#A80036" points="1388.5,200.0938,1398.5,204.0938,1388.5,208.0938,1392.5,204.0938" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="972.5" x2="1394.5" y1="204.0938" y2="204.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="347" x="979.5" y="199.0278">zwave_network_management_remove_failed(node_id)</text><polygon fill="#A80036" points="983.5,229.2266,973.5,233.2266,983.5,237.2266,979.5,233.2266" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="977.5" x2="1399.5" y1="233.2266" y2="233.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="404" x="989.5" y="228.1606">on_state_updated(NM_WAITING_FOR_FAILED_NODE_REMOVAL)</text><polygon fill="#A80036" points="135,303.7578,125,307.7578,135,311.7578,131,307.7578" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="129" x2="971.5" y1="307.7578" y2="307.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="153" x="141" y="257.2935">ucl/by-unid/&lt;gw-node&gt;/</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="118" x="141" y="272.4263">ProtocolController/</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="137" x="141" y="287.5591">NetworkManagement</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="184" x="141" y="302.6919">{"State": "remove node", ...}</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="222" x="651.25" y="339.9683">Waiting for offfline node to be removed</text><polygon fill="#A80036" points="983.5,373.6953,973.5,377.6953,983.5,381.6953,979.5,377.6953" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="977.5" x2="1399.5" y1="377.6953" y2="377.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="182" x="989.5" y="372.6294">on_state_updated(NM_IDLE)</text><polygon fill="#A80036" points="135,448.2266,125,452.2266,135,456.2266,131,452.2266" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="129" x2="971.5" y1="452.2266" y2="452.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="153" x="141" y="401.7622">ucl/by-unid/&lt;gw-node&gt;/</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="118" x="141" y="416.895">ProtocolController/</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="137" x="141" y="432.0278">NetworkManagement</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="121" x="141" y="447.1606">{"State": "idle", ...}</text><!--MD5=[b0d5f0cbdec708aecf0df75543122dca]
@startuml inline_umlgraph_5.svg
  box "MQTT Broker" #LightYellow
  participant MQTT
  end box
  box "ZPC" #LightBlue
  participant UclNodeState
  participant UclNetworkManagement
  participant NetworkManagement
  end box

  note over MQTT: User trigger Remove Offline Node
  MQTT                  -> UclNodeState         : <i>ucl/by-unid/<offline-node-unid>/State/Commands/OfflineRemove</i>\n"
  UclNodeState          -> UclNetworkManagement : ucl_network_management_remove_offline_node(node_id)
  UclNetworkManagement  -> NetworkManagement    : zwave_network_management_remove_failed(node_id)
  NetworkManagement     -> UclNetworkManagement : on_state_updated(NM_WAITING_FOR_FAILED_NODE_REMOVAL)
  UclNetworkManagement  -> MQTT                 : <i>ucl/by-unid/<gw-node>/</i>\n<i>ProtocolController/</i>\n<i>NetworkManagement</i>\n{"State": "remove node", ...}
  ... Waiting for offfline node to be removed ...
  NetworkManagement     -> UclNetworkManagement : on_state_updated(NM_IDLE)
  UclNetworkManagement  -> MQTT                 : <i>ucl/by-unid/<gw-node>/</i>\n<i>ProtocolController/</i>\n<i>NetworkManagement</i>\n{"State": "idle", ...}
@enduml

PlantUML version 1.2021.00(Sun Jan 10 10:25:05 UTC 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: ANSI_X3.4-1968
Language: en
Country: US
--></g></svg>