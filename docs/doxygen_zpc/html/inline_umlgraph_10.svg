<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="515px" preserveAspectRatio="none" style="width:796px;height:515px;background:#FFFFFF;" version="1.1" viewBox="0 0 796 515" width="796px" zoomAndPan="magnify"><defs><filter height="300%" id="fd9v5gcfuz7f9" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFE0" height="503.6563" style="stroke:#A80036;stroke-width:1.0;" width="100" x="52" y="6"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="94" x="55" y="18.0669">MQTT Broker</text><rect fill="#ADD8E6" height="503.6563" style="stroke:#A80036;stroke-width:1.0;" width="561.5" x="229" y="6"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="30" x="494.75" y="18.0669">ZPC</text><line style="stroke:#A80036;stroke-width:1.0;" x1="101.5" x2="101.5" y1="60.4297" y2="316.8906"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="101.5" x2="101.5" y1="316.8906" y2="357.6953"/><line style="stroke:#A80036;stroke-width:1.0;" x1="101.5" x2="101.5" y1="357.6953" y2="471.3594"/><line style="stroke:#A80036;stroke-width:1.0;" x1="326" x2="326" y1="60.4297" y2="316.8906"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="326" x2="326" y1="316.8906" y2="357.6953"/><line style="stroke:#A80036;stroke-width:1.0;" x1="326" x2="326" y1="357.6953" y2="471.3594"/><line style="stroke:#A80036;stroke-width:1.0;" x1="703.5" x2="703.5" y1="60.4297" y2="316.8906"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="703.5" x2="703.5" y1="316.8906" y2="357.6953"/><line style="stroke:#A80036;stroke-width:1.0;" x1="703.5" x2="703.5" y1="357.6953" y2="471.3594"/><rect fill="#FEFECE" filter="url(#fd9v5gcfuz7f9)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="55" x="72.5" y="25.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="41" x="79.5" y="45.1279">MQTT</text><rect fill="#FEFECE" filter="url(#fd9v5gcfuz7f9)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="55" x="72.5" y="470.3594"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="41" x="79.5" y="490.3545">MQTT</text><rect fill="#FEFECE" filter="url(#fd9v5gcfuz7f9)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="183" x="233" y="25.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="169" x="240" y="45.1279">UclNetworkManagement</text><rect fill="#FEFECE" filter="url(#fd9v5gcfuz7f9)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="183" x="233" y="470.3594"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="169" x="240" y="490.3545">UclNetworkManagement</text><rect fill="#FEFECE" filter="url(#fd9v5gcfuz7f9)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="162" x="620.5" y="25.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="148" x="627.5" y="45.1279">NetworkManagement</text><rect fill="#FEFECE" filter="url(#fd9v5gcfuz7f9)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="162" x="620.5" y="470.3594"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="148" x="627.5" y="490.3545">NetworkManagement</text><path d="M5,75.4297 L5,100.4297 L196,100.4297 L196,85.4297 L186,75.4297 L5,75.4297 " fill="#FBFB77" filter="url(#fd9v5gcfuz7f9)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M186,75.4297 L186,85.4297 L196,85.4297 L186,75.4297 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="170" x="11" y="92.4966">User trigger Remove Node</text><polygon fill="#A80036" points="314.5,172.0938,324.5,176.0938,314.5,180.0938,318.5,176.0938" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="102" x2="320.5" y1="176.0938" y2="176.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="153" x="109" y="125.6294">ucl/by-unid/&lt;gw-node&gt;/</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="118" x="109" y="140.7622">ProtocolController/</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="173" x="109" y="155.895">NetworkManagement/Write</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="184" x="109" y="171.0278">{"State": "remove node", ...}</text><polygon fill="#A80036" points="691.5,201.2266,701.5,205.2266,691.5,209.2266,695.5,205.2266" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="326.5" x2="697.5" y1="205.2266" y2="205.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="295" x="333.5" y="200.1606">zwave_network_management_remove_node()</text><polygon fill="#A80036" points="337.5,230.3594,327.5,234.3594,337.5,238.3594,333.5,234.3594" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="331.5" x2="702.5" y1="234.3594" y2="234.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="353" x="343.5" y="229.2935">on_state_updated(NM_WAITING_FOR_NODE_REMOVAL)</text><polygon fill="#A80036" points="113,304.8906,103,308.8906,113,312.8906,109,308.8906" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="107" x2="325.5" y1="308.8906" y2="308.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="153" x="119" y="258.4263">ucl/by-unid/&lt;gw-node&gt;/</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="118" x="119" y="273.5591">ProtocolController/</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="137" x="119" y="288.6919">NetworkManagement</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="184" x="119" y="303.8247">{"State": "remove node", ...}</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="179" x="313.25" y="341.1011">Waiting for node to be removed</text><polygon fill="#A80036" points="337.5,374.8281,327.5,378.8281,337.5,382.8281,333.5,378.8281" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="331.5" x2="702.5" y1="378.8281" y2="378.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="182" x="343.5" y="373.7622">on_state_updated(NM_IDLE)</text><polygon fill="#A80036" points="113,449.3594,103,453.3594,113,457.3594,109,453.3594" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="107" x2="325.5" y1="453.3594" y2="453.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="153" x="119" y="402.895">ucl/by-unid/&lt;gw-node&gt;/</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="118" x="119" y="418.0278">ProtocolController/</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="137" x="119" y="433.1606">NetworkManagement</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="121" x="119" y="448.2935">{"State": "idle", ...}</text><!--MD5=[f2d6f72aea52fd3cf570ec1237247b8b]
@startuml inline_umlgraph_10.svg
  box "MQTT Broker" #LightYellow
  participant MQTT
  end box
  box "ZPC" #LightBlue
  participant UclNetworkManagement
  participant NetworkManagement
  end box

  note over MQTT: User trigger Remove Node
  MQTT                  -> UclNetworkManagement : <i>ucl/by-unid/<gw-node>/</i>\n<i>ProtocolController/</i>\n<i>NetworkManagement/Write</i>\n{"State": "remove node", ...}
  UclNetworkManagement  -> NetworkManagement    : zwave_network_management_remove_node()
  NetworkManagement     -> UclNetworkManagement : on_state_updated(NM_WAITING_FOR_NODE_REMOVAL)
  UclNetworkManagement  -> MQTT                 : <i>ucl/by-unid/<gw-node>/</i>\n<i>ProtocolController/</i>\n<i>NetworkManagement</i>\n{"State": "remove node", ...}
  ... Waiting for node to be removed ...
  NetworkManagement     -> UclNetworkManagement : on_state_updated(NM_IDLE)
  UclNetworkManagement  -> MQTT                 : <i>ucl/by-unid/<gw-node>/</i>\n<i>ProtocolController/</i>\n<i>NetworkManagement</i>\n{"State": "idle", ...}
@enduml

PlantUML version 1.2022.0(Tue Jan 11 16:16:42 UTC 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: ANSI_X3.4-1968
Language: en
Country: US
--></g></svg>