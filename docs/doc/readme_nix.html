<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Nix (Experimental) &mdash; Unify Host SDK</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/custom_styles.css" type="text/css" />
    <link rel="canonical" href="https://siliconlabs.github.io/UnifySDK/doc/readme_nix.html" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/js/charenc.js"></script>
        <script src="../_static/js/crypt.js"></script>
        <script src="../_static/js/sha1.js"></script>
        <script src="../_static/js/html5-qrcode.min.js"></script>
        <script src="../_static/js/qr_code_scanner.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="CMake Integration" href="readme_cmake.html" />
    <link rel="prev" title="Unify Build Guide" href="readme_building.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="introduction.html" class="icon icon-home"> Unify
            <img src="../_static/silicon-labs-logo.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                ver_1.3.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Unify Host SDK</a></li>
<li class="toctree-l1"><a class="reference internal" href="UnifySDK.html">Unify Framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="multiprotocol.html">Multiprotocol Host Software</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Getting Started with the Unify Host SDK</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="readme_developer.html">Unify Developer Guide</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="readme_building.html">Unify Build Guide</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">Nix (Experimental)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#build">Build</a></li>
<li class="toctree-l4"><a class="reference internal" href="#run">Run</a></li>
<li class="toctree-l4"><a class="reference internal" href="#development-environment">Development environment</a></li>
<li class="toctree-l4"><a class="reference internal" href="#dependencies">Dependencies</a></li>
<li class="toctree-l4"><a class="reference internal" href="#optional-dependencies">Optional dependencies</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="readme_building.html#build-instructions">Build Instructions</a></li>
<li class="toctree-l3"><a class="reference internal" href="readme_building.html#build-docker-image">Build Docker Image</a></li>
<li class="toctree-l3"><a class="reference internal" href="readme_building.html#porting-the-unify-host-sdk">Porting the Unify Host SDK</a></li>
<li class="toctree-l3"><a class="reference internal" href="readme_building.html#miscellaneous">Miscellaneous</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="readme_cmake.html">CMake Integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="readme_debug.html">Unify Debugging Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="readme_rust.html">Unify Rust Development</a></li>
<li class="toctree-l2"><a class="reference internal" href="unify_library_overview.html">Unify Library Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="standards/coding-standard.html">Unify Coding Standard</a></li>
<li class="toctree-l2"><a class="reference internal" href="api.html">API documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="readme_developer.html#directory-structure-and-file-naming-conventions">Directory Structure and File Naming Conventions</a></li>
<li class="toctree-l2"><a class="reference internal" href="readme_developer.html#clang-format-autoformat-code">Clang-Format (autoformat code)</a></li>
<li class="toctree-l2"><a class="reference internal" href="readme_developer.html#pre-commit-hooks">Pre-commit Hooks</a></li>
<li class="toctree-l2"><a class="reference internal" href="readme_developer.html#creating-a-new-application">Creating a New Application</a></li>
<li class="toctree-l2"><a class="reference internal" href="readme_developer.html#unify-framework-library-unify-main-and-ipc">Unify Framework Library (Unify Main) and IPC</a></li>
<li class="toctree-l2"><a class="reference internal" href="readme_developer.html#nix-experimental">Nix (Experimental)</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="system_requirements.html">System Requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="qr_code_scanner.html">QR-Code Scanner</a></li>
<li class="toctree-l1"><a class="reference internal" href="license.html">License</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="introduction.html">Unify</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <script>
    $(".wy-side-scroll").append("<div class='github-button'><iframe src='https://ghbtns.com/github-btn.html?user=SiliconLabs&repo=UnifySDK&type=watch&count=true&size=large&v=2' allowtransparency='true' frameborder='0' scrolling='0' width='170' height='30'></iframe></div>");
</script>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section class="tex2jax_ignore mathjax_ignore" id="nix-experimental">
<h1>Nix (Experimental)<a class="headerlink" href="#nix-experimental" title="Permalink to this heading"></a></h1>
<p>We are adding support for <a class="reference external" href="https://nixos.wiki/wiki/Flakes"><code class="docutils literal notranslate"><span class="pre">nix</span> <span class="pre">flakes</span></code></a> to make use of the <a class="reference external" href="https://nixos.org/manual/nix/stable/">nix package manager</a>.
This aims to let developers leverage the benefits of using a <a class="reference external" href="https://nixos.org/manual/nix/stable/">purely functional package manager</a>.</p>
<blockquote>
<div><p>Why use <code class="docutils literal notranslate"><span class="pre">nix</span></code>? In short, it gives you deterministic and reproducible builds at native speeds and an augmented shell with all the development dependencies.
In contrast, our container does not give you these guarantees and may perform significantly worse than native, and the container constrains your development environment.</p>
</div></blockquote>
<p>We have added a set of conveniences in a <code class="docutils literal notranslate"><span class="pre">justfile</span></code>.
You can see all the recipes by running <code class="docutils literal notranslate"><span class="pre">&gt;</span> <span class="pre">just</span></code>.</p>
<section id="build">
<h2>Build<a class="headerlink" href="#build" title="Permalink to this heading"></a></h2>
<p>To build <code class="docutils literal notranslate"><span class="pre">libunify</span></code> run <code class="docutils literal notranslate"><span class="pre">&gt;</span> <span class="pre">just</span> <span class="pre">build</span></code>.
To build <code class="docutils literal notranslate"><span class="pre">zpc</span></code> run <code class="docutils literal notranslate"><span class="pre">&gt;</span> <span class="pre">just</span> <span class="pre">build</span> <span class="pre">zpc</span></code>.
You can see the all the outputs provided by the flake by running <code class="docutils literal notranslate"><span class="pre">&gt;</span> <span class="pre">just</span> <span class="pre">show</span></code>.</p>
<p>You can build with <code class="docutils literal notranslate"><span class="pre">nix</span></code> without enabling flakes by running the commands that the <code class="docutils literal notranslate"><span class="pre">justfile</span></code> provides conveniences for, like building the default derivation.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>nix<span class="w"> </span>--experimental-features<span class="w"> </span><span class="s1">&#39;nix-command flakes&#39;</span><span class="w"> </span>build
</pre></div>
</div>
<p>This is equivalent to</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>nix<span class="w"> </span>--experimental-features<span class="w"> </span><span class="s1">&#39;nix-command flakes&#39;</span><span class="w"> </span>build<span class="w"> </span>.#libunify
</pre></div>
</div>
<p>because <code class="docutils literal notranslate"><span class="pre">libunify</span></code> is the default derivation.</p>
<p>If <a class="reference external" href="https://nixos.org/manual/nix/unstable/command-ref/nix-build.html#description">building</a> succeeds you’ll see the result symlinked to <code class="docutils literal notranslate"><span class="pre">./result</span></code>.</p>
</section>
<section id="run">
<h2>Run<a class="headerlink" href="#run" title="Permalink to this heading"></a></h2>
<p>The application in the project can likewise be run in a pleasant and easy way leveraging <code class="docutils literal notranslate"><span class="pre">nix</span></code>. You can run <code class="docutils literal notranslate"><span class="pre">zpc</span></code> with <code class="docutils literal notranslate"><span class="pre">&gt;</span> <span class="pre">just</span> <span class="pre">run</span> <span class="pre">zpc</span></code>.</p>
<blockquote>
<div><p>You can run applications without having to check out the project with <code class="docutils literal notranslate"><span class="pre">&gt;</span> <span class="pre">nix</span> <span class="pre">run</span> <span class="pre">github:SiliconLabs/UnifySDK#zpc</span></code> once this work gets published.</p>
</div></blockquote>
</section>
<section id="development-environment">
<h2>Development environment<a class="headerlink" href="#development-environment" title="Permalink to this heading"></a></h2>
<section id="first-class-experience">
<h3>First-class experience<a class="headerlink" href="#first-class-experience" title="Permalink to this heading"></a></h3>
<p>Use <a class="reference external" href="https://direnv.net/"><code class="docutils literal notranslate"><span class="pre">direnv</span></code></a> combined with <a class="reference external" href="https://github.com/nix-community/nix-direnv"><code class="docutils literal notranslate"><span class="pre">nix-direnv</span></code></a> to automatically augment your shell when you navigate to the project directory.</p>
<p>Create <code class="docutils literal notranslate"><span class="pre">.direnv.rc</span></code></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>───────┬───────────────────────────────────────────────────────────────────
<span class="w">       </span>│<span class="w"> </span>File:<span class="w"> </span>.direnv.rc
───────┼───────────────────────────────────────────────────────────────────
<span class="w">   </span><span class="m">1</span><span class="w">   </span>│<span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span>-f<span class="w"> </span><span class="nv">$HOME</span>/.nix-profile/share/nix-direnv/direnvrc<span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">   </span><span class="m">2</span><span class="w">   </span>│<span class="w">     </span><span class="nb">source</span><span class="w"> </span><span class="nv">$HOME</span>/.nix-profile/share/nix-direnv/direnvrc
<span class="w">   </span><span class="m">3</span><span class="w">   </span>│<span class="w"> </span><span class="k">fi</span>
───────┴───────────────────────────────────────────────────────────────────
</pre></div>
</div>
<p>and give <code class="docutils literal notranslate"><span class="pre">direnv</span></code> permission to load the <code class="docutils literal notranslate"><span class="pre">.envrc</span></code> present in the project directory.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt;<span class="w"> </span>direnv<span class="w"> </span>allow
</pre></div>
</div>
</section>
<section id="nix-development-shell">
<h3>Nix development shell<a class="headerlink" href="#nix-development-shell" title="Permalink to this heading"></a></h3>
<p>To start the interactive development shell run <code class="docutils literal notranslate"><span class="pre">&gt;</span> <span class="pre">just</span> <span class="pre">develop</span></code>.
This drops you into the dev shell with all the dependencies you need to develop for any and all aspects of the Unify SDK.
<em>It will take a while to build the third party dependencies from source the first time you do this.</em></p>
</section>
</section>
<section id="dependencies">
<h2>Dependencies<a class="headerlink" href="#dependencies" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p><a class="reference external" href="https://nixos.org/download.html"><code class="docutils literal notranslate"><span class="pre">nix</span></code></a></p></li>
</ul>
</section>
<section id="optional-dependencies">
<h2>Optional dependencies<a class="headerlink" href="#optional-dependencies" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/casey/just#installation"><code class="docutils literal notranslate"><span class="pre">just</span></code></a></p></li>
<li><p><a class="reference external" href="https://direnv.net/"><code class="docutils literal notranslate"><span class="pre">direnv</span></code></a></p></li>
<li><p><a class="reference external" href="https://github.com/nix-community/nix-direnv"><code class="docutils literal notranslate"><span class="pre">nix-direnv</span></code></a></p></li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer>
    <hr/>
    <p>Copyright © 2023 Silicon Laboratories. All rights reserved.</p>
</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>